{% extends "base.html" %}

{% block head %}{% endblock %}

{% block body %}

<div class="breakdance3">

	<div class="container">

		<div class="row row-padding">

			<div class="col-md-10 col-md-offset-1 white-table">
					<h1 class="centre-text">Lessons</h1>

					<table class="table">
						<thead>
							<tr>
									<th>Date</th>
									<th>Category</th>
									<th>Teachers</th>
									<th>Video Link</th>
									<th></th>
							</tr>
						</thead>

						<tbody>

							{% for i in lesson_list %}
									<tr>
											<td>{{ i.date }}</td>
											<td>{{ i.category }}</td>
											<td>{{ i.teachers }}</td>
											<td>{{ i.video_link }}</td>
											<td>
												<a href="/editlesson/{{ i.id }}"  class="btn manage-button"><span class="glyphicon glyphicon-pencil"></span></a>
												<a href="#delete-lesson-model" data-toggle="modal" data-id="{{ i.id }}" class="btn manage-button delete-lesson"><span class="glyphicon glyphicon-trash"></span></a>
											</td>
									</tr>
							{% endfor %}

						</tbody>
					</table>

					<a href="/addlesson" class="btn add-new"><span class="glyphicon glyphicon-plus"></span> add new lesson</a>
					<br><br>
			</div>

		</div>

	</div>

</div>

<div class="modal fade" id="delete-lesson-model" tabindex="-1" role="dialog" aria-labelledby="delete-lesson-labrel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">Delete lesson</h4>
			</div>
			<div class="modal-body">
				Are you sure you want to delete this lesson?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">No</button>
				<a href="/" id="delete-lesson" class="btn btn-primary">Yes</a>
			</div>
		</div>
	</div>
</div>

{% endblock %}

{% block extra_js %}

<script type="text/javascript" src="{{ url_for('static', filename='javascripts/bootstrap/modal.js') }} "></script>

<script type="text/javascript">

	$(document).on("click", ".delete-lesson", function () {
			var lessonId = $(this).data('id');
			$(".modal-footer #delete-lesson").attr('href', '/deletelesson/' + lessonId);
	});

</script>

<script>

	$("#lessonlist").addClass("active");

</script>

{% endblock %}
